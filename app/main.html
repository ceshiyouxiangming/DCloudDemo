<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>Hello MUI</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">

		<!--标准mui.css-->
		<link rel="stylesheet" href="../css/mui.min.css">
		<!--App自定义的css-->
		<!--<link rel="stylesheet" type="text/css" href="../css/app.css"/>-->
		<style>
			h5 {
				padding-top: 8px;
				padding-bottom: 8px;
				text-indent: 12px;
			}
			
			.mui-table-view.mui-grid-view .mui-table-view-cell .mui-media-body {
				font-size: 15px;
				margin-top: 8px;
				color: #333;
			}
		</style>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav">
			<h1 class="mui-title">商品列表</h1>
		</header>

		<div class="mui-content" style="background-color:#fff">
			<h5 style="background-color:#efeff4">慢生活</h5>

			<div id="slider" class="mui-slider">
				<div class="mui-slider-group">
					<div class="mui-slider-item mui-slider-item-duplicate">

						<ul class="mui-table-view mui-grid-view">
							<li class="mui-table-view-cell mui-media mui-col-xs-6">
								<a href="detail.html">
									<img class="mui-media-object" src="../images/shuijiao.jpg">
									<div class="mui-media-body">幸福就是可以一起睡觉</div>
								</a>
							</li>
							<li class="mui-table-view-cell mui-media mui-col-xs-6">
								<a href="detail.html">
									<img class="mui-media-object" src="../images/muwu.jpg">
									<div class="mui-media-body">想要一间这样的木屋，静静的喝咖啡</div>
								</a>
							</li>
							<li class="mui-table-view-cell mui-media mui-col-xs-6">
								<a href="detail.html"><img class="mui-media-object" src="../images/cbd.jpg">
									<div class="mui-media-body">Color of SIP CBD</div>
								</a>
							</li>
							<li class="mui-table-view-cell mui-media mui-col-xs-6">
								<a href="detail.html">
									<img class="mui-media-object" src="../images/yuantiao.jpg">
									<div class="mui-media-body">静静看这世界</div>
								</a>
							</li>

							<li class="mui-table-view-cell mui-media mui-col-xs-6">
								<a href="detail.html">
									<img class="mui-media-object" src="../images/PSVista.png">
									<div class="mui-media-body">PSVista</div>
								</a>
							</li>
							<li class="mui-table-view-cell mui-media mui-col-xs-6">
								<a href="detail.html">
									<img class="mui-media-object" src="../images/PSVista.png">
									<div class="mui-media-body">PSVista</div>
								</a>
							</li>
							<li class="mui-table-view-cell mui-media mui-col-xs-6">
								<a href="detail.html">
									<img class="mui-media-object" src="../images/MacPro.jpg">
									<div class="mui-media-body">MacPro</div>
								</a>
							</li>
							<br><br><br><br>
						</ul>
					</div>

					<div class="mui-slider-item mui-slider-item-duplicate">

						<ul class="mui-table-view">
							<li class="mui-table-view-cell mui-media">
								<a href="javascript:;">
									<img class="mui-media-object mui-pull-left" src="../images/shuijiao.jpg">
									<div class="mui-media-body">
										幸福
										<p class='mui-ellipsis'>能和心爱的人一起睡觉，是件幸福的事情；可是，打呼噜怎么办？</p>
									</div>
								</a>
							</li>
							<li class="mui-table-view-cell mui-media">
								<a href="javascript:;">
									<img class="mui-media-object mui-pull-left" src="../images/muwu.jpg">
									<div class="mui-media-body">
										木屋
										<p class='mui-ellipsis'>想要这样一间小木屋，夏天挫冰吃瓜，冬天围炉取暖.</p>
									</div>
								</a>
							</li>
							<li class="mui-table-view-cell mui-media">
								<a href="javascript:;">
									<img class="mui-media-object mui-pull-left" src="../images/cbd.jpg">
									<div class="mui-media-body">
										CBD
										<p class='mui-ellipsis'>烤炉模式的城，到黄昏，如同打翻的调色盘一般.</p>
									</div>
								</a>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div>

		<!--底部导航条-->
		<nav class="mui-bar mui-bar-tab">
			<a class="mui-tab-item mui-active">
				<span class="mui-icon mui-icon-home"></span>
				<span class="mui-tab-label">ホーム</span>
			</a>
			<a class="mui-tab-item" href="exhibit.html">
				<span class="mui-icon mui-icon-email"><span class="mui-badge">9</span></span>
				<span class="mui-tab-label">商品登録</span>
			</a>
			<a class="mui-tab-item" href="#tabbar-with-contact">
				<span class="mui-icon mui-icon-contact"></span>
				<span class="mui-tab-label">コミュニケーション</span>
			</a>
			<a class="mui-tab-item" href="#tabbar-with-map">
				<span class="mui-icon mui-icon-gear"></span>
				<span class="mui-tab-label">リクエスト</span>
			</a>
		</nav>
	</body>
	<script src="../js/mui.min.js"></script>
	<script>
		//设置默认打开首页显示的子页序号；
		var Index = 0;
		//把子页的路径写在数组里面
		var subpages = ['home.html', 'exhibit.html', 'chatlist.html', 'request.html'];

		mui.init({
			swipeBack: true //启用右滑关闭功能
		});

		//所有的plus-*方法写在mui.plusReady中或者后面。
		mui.plusReady(function() {
			//获取当前页面所属的Webview窗口对象
			var self = plus.webview.currentWebview();
			for(var i = 0; i <= 3; i++) {
				//创建webview子页
				var sub = plus.webview.create(
					subpages[i], //子页url
					subpages[i], //子页id
					{
						top: '45px', //设置距离顶部的距离
						bottom: '50px' //设置距离底部的距离
					}
				);
				//如不是我们设置的默认的子页则隐藏，否则添加到窗口中
				if(i != Index) {
					sub.hide();
				}
				//将webview对象填充到窗口
				self.append(sub);
			}
		});

		//兼容浏览器的处理
		var createIframe = function(el, opt) {
			var elContainer = document.querySelector(el);
			var wrapper = document.querySelector(".mui-iframe-wrapper");
			if(!wrapper) {
				// 创建wrapper 和 iframe
				wrapper = document.createElement('div');
				wrapper.className = 'mui-iframe-wrapper';
				for(var i in opt.style) {
					wrapper.style[i] = opt.style[i];
				}
				var iframe = document.createElement('iframe');
				iframe.src = opt.url;
				iframe.id = opt.id || opt.url;
				iframe.name = opt.id;
				wrapper.appendChild(iframe);
				elContainer.appendChild(wrapper);
			} else {
				var iframe = wrapper.querySelector('iframe');
				iframe.src = opt.url;
				iframe.id = opt.id || opt.url;
				iframe.name = iframe.id;
			}
		}

		//当前激活选项
		var activeTab = subpages[Index],
			title = document.querySelector(".mui-title");
		//选项卡点击事件
		mui('.mui-bar-tab').on('tap', 'a', function(e) {

			//获取目标子页的id
			var href = this.getAttribute('href');

			//如果是本页就返回
			if(href == activeTab) {
				return;
			}

			//非plus环境，直接走href跳转,本地确认画面用
			if(!mui.os.plus) {
				location.href = href;
				return;
			}

			//更换标题
			title.innerHTML = this.querySelector('.mui-tab-label').innerHTML;
			
			//子页面跳转
			if(mui.os.plus) {
				// 显示目标webview
				plus.webview.show(targetTab);
				// 隐藏当前webview
				plus.webview.hide(activeTab);
				// 更改当前活跃的选项卡
				activeTab = targetTab;
			} else {
				// 创建iframe代替子页面
				createIframe('.mui-content', {
					url: targetTab,
					style: {
						top: '45px', //设置距离顶部的距离
						bottom: '50px' //设置距离底部的距离
					}
				});
			}
		});
	</script>

</html>